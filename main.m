  addpath(genpath('./code'));
  addpath(genpath('./data'));
 tStart1 = tic; 
%%%%comb1%%%%%%%%
 TabIndTrain=[117 94 165 275 232 264 112 38 21 246 166 32 144 87 161 86 245 113 180 214 121 229 156 33 6 249 115 254 216 151 224 53 140 3 91 157 129 252 66 15 133 128 67 109 278 96 52 100 277 167 206 29 126 11 176 141 212 43 174 204 73 263 10 223 58 205 207 107 203 239 162 235 139 236 142 154 70 34 34 60 68 217 123 250 220 230 102 127 49 31 7 81 172 225 201 186 209 98 36 226 261 34 95 148 56 72 195 136 76 163 244 177 150 192 84 40 153 27 243 122 138 155 218 143 16 227 211 125 208 184 39 215 114 45 185 106 34 34 93 202 281 75 267 13 183 34 240 34 44 276];
%%%%comb2%%%%%%%%%
%TabIndTrain=[144 140 31 241 91 59 103 151 3 233 41 281 1 24 208 133 104 4 18 224 117 166 220 97 6 113 206 34 85 207 274 196 178 72 56 19 275 218 280 10 230 155 119 267 67 94 33 261 58 20 152 55 95 164 278 63 224 158 217 245 36 268 175 253 205 135 224 177 128 224 160 76 134 189 89 232 194 79 118 162 43 244 120 165 130 77 30 49 93 195 273 105 148 112 256 242 38 156 83 138 229 184 224 211 64 35 224 252 74 142 21 248 225 237 250 25 209 269 107 186 27 47 44 96 116 243 146 92 170 70 247 224 16 258 121 240 224 210 180 15 123 181 65 147 145 99 150 154 199 71];
%%%%comb3%%%%%%%%
%TabIndTrain=[9 255 163 182 33 94 87 41 245 51 149 164 44 186 182 137 100 117 249 174 182 77 135 187 275 154 182 24 204 212 188 153 226 254 141 264 114 222 144 182 179 228 182 260 158 236 194 229 195 105 34 47 59 252 262 180 253 192 86 132 263 265 70 49 220 280 71 266 120 101 84 115 129 182 238 50 46 267 140 48 214 68 211 64 121 38 274 133 270 15 217 201 224 136 22 271 239 63 244 53 109 182 231 161 223 90 147 148 131 89 142 279 250 269 268 197 103 146 91 119 176 160 98 116 43 205 210 206 215 243 173 85 227 110 67 256 247 234 235 138 58 99 182 143 111 92 124 13 36 219];
%%%%comb4%%%%%%%%
%TabIndTrain=[193 146 69 18 18 104 139 261 58 155 197 216 120 270 228 94 78 144 5 178 141 117 46 215 211 226 42 156 209 61 240 30 188 18 276 152 278 103 54 18 12 71 49 2 48 111 205 220 119 67 154 210 106 213 222 45 187 153 115 99 18 137 77 265 204 37 273 168 135 68 75 3 113 201 134 264 274 31 17 169 22 189 219 86 32 247 63 257 250 21 166 221 238 183 122 271 15 159 181 97 262 25 251 280 107 116 198 11 130 124 102 18 84 227 4 244 65 9 7 160 171 186 253 66 83 105 24 28 29 230 74 93 272 136 23 185 36 44 203 233 212 254 229 90 223 177 52 62 18 133];
  %%%%comb5%%%%%%%%
%TabIndTrain=[165 164 226 139 15 236 69 80 7 40 31 223 38 165 235 159 179 46 177 95 228 257 16 160 29 166 242 253 244 219 274 143 27 21 233 123 68 158 62 246 167 113 25 165 165 161 260 9 187 41 195 116 93 231 224 19 272 146 107 23 188 22 57 252 125 126 120 49 72 276 165 163 39 61 162 145 135 174 24 32 147 201 26 4 209 281 12 64 271 84 88 165 211 106 220 129 280 182 150 151 165 156 277 20 279 96 165 124 102 206 197 175 214 54 237 180 142 141 263 275 81 5 115 266 196 210 165 136 222 55 63 100 2 176 130 230 1 191 59 251 254 152 173 259 202 245 240 83 194 268];
  %%%%comb6%%%%%%%%
%TabIndTrain=[77 16 14 37 100 136 26 106 32 211 58 244 67 266 212 109 119 169 194 141 30 238 12 224 3 190 166 155 134 93 179 178 265 118 8 90 132 26 21 1 18 275 207 94 129 70 280 206 154 31 20 74 61 26 124 231 63 76 17 198 125 241 233 95 202 42 15 25 144 44 161 256 26 150 26 26 26 156 189 99 277 5 2 228 29 19 180 128 69 281 148 102 121 196 83 185 6 267 227 184 78 175 49 203 167 64 221 54 62 26 92 237 75 217 278 45 116 131 27 215 127 105 200 13 257 130 48 253 164 65 226 26 7 4 34 97 272 242 133 26 82 56 199 139 110 214 176 208 276 255];
 %%%%comb7%%%%%%%%
 %TabIndTrain=[165 34 215 39 31 74 186 35 119 122 87 205 45 46 199 158 105 28 255 258 47 30 134 170 239 76 84 184 73 38 194 91 125 263 124 100 110 56 62 56 132 202 68 7 29 133 96 2 268 1 234 167 81 36 206 168 54 225 195 55 209 56 218 149 137 156 56 49 193 235 126 265 56 251 90 197 229 141 269 142 27 226 135 127 144 169 3 56 224 208 18 271 173 98 180 58 196 41 242 204 178 190 80 275 11 22 151 130 56 67 207 236 128 280 230 6 129 9 77 121 164 187 99 17 248 243 65 44 43 213 261 82 266 37 150 111 59 56 14 85 5 56 270 53 56 256 203 257 143 157];
 %%%%comb8%%%%%%%%
%TabIndTrain=[252 87 79 28 178 168 26 170 28 56 16 154 256 176 47 66 177 96 106 29 71 36 91 221 185 184 145 113 276 105 246 188 85 191 249 59 15 240 232 44 32 181 199 159 141 203 258 140 161 186 262 143 200 119 251 75 265 89 142 239 8 28 224 114 100 268 67 123 34 31 51 230 189 190 173 219 215 23 28 209 218 122 37 235 134 38 152 28 253 128 205 28 88 28 118 241 222 248 158 33 244 124 49 155 197 28 162 70 171 109 275 157 278 77 9 242 247 28 264 213 58 273 243 74 208 131 40 104 132 55 61 28 68 60 133 48 28 5 271 148 28 164 227 263 73 237 277 57 233 196];
 %%%%comb9%%%%%%%%
 %TabIndTrain=[107 108 75 8 164 154 280 6 111 232 211 261 41 188 219 168 22 199 191 79 251 142 88 69 39 128 186 13 141 109 231 174 167 209 215 3 20 70 120 148 181 172 37 281 30 74 235 81 241 19 216 60 89 2 242 72 237 259 44 225 65 64 140 156 144 183 162 170 33 84 56 53 205 110 252 244 234 228 129 200 8 116 99 204 34 31 194 8 15 263 117 8 119 113 222 224 175 51 17 63 277 26 258 101 12 260 123 149 28 8 59 267 35 257 50 230 78 112 94 163 57 240 180 67 161 25 134 29 239 207 130 8 40 268 138 55 136 133 262 126 255 278 153 139 52 201 233 8 93 121];
%%%%%comb10%%%%%%
% TabIndTrain=[165 180 58 134 170 173 123 74 241 156 260 232 34 3 278 56 88 67 65 42 127 76 23 269 194 197 66 230 113 250 264 118 6 100 234 222 71 19 69 29 163 30 11 87 222 75 155 271 204 168 207 164 221 117 251 147 16 258 146 153 105 22 159 275 62 47 101 176 186 235 215 238 195 239 222 247 213 32 43 8 190 64 112 90 139 254 268 216 57 132 37 222 202 70 253 192 61 272 135 237 184 44 181 222 246 226 99 115 276 38 107 160 68 27 166 46 280 145 131 7 201 222 144 78 35 249 212 86 26 1 138 24 203 49 96 167 174 109 222 97 28 95 60 266 108 222 151 142 256 222];
 
 camera1='Cam1';
 Bloc1='Set1';
camera2='Cam2';
 Bloc2='Set2';
%%%%CalculeDisLocal pour donne train
a1=load(strcat('JointLocalLIDS',camera2, Bloc1,'.mat'));
a2=load(strcat('JointLocalLIDS',camera2, Bloc2,'.mat'));
[Cam1LocalTrain] = CalculeDisLocal(TabIndTrain,a1,a2)
%%%%CalculeDisGrassmann
a3= load(strcat( Bloc1,'SkeletonMat_LIDS',camera2,'.mat'));
 a4=  load(strcat( Bloc2,'SkeletonMat_LIDS',camera2,'.mat'));
 [Cam1GrassmannTrain] = CalculeDisGrassmann(TabIndTrain,a3,a4);
 %%%comb data train
 [ResultatCombTrain,SauveGardAlfaTrain,cRank] = Combiner_Train(Cam1GrassmannTrain,Cam1LocalTrain)
 %%clasRank=pour voir chaq alfa ce qui donne comme des rank
 %keyboard
  tEnd1 = toc(tStart1)
   tStart2 = tic
%Calcule dist local pour donne test
a5=load(strcat('JointLocalLIDS',camera1, Bloc1,'.mat'));
a6=load(strcat('JointLocalLIDS',camera1, Bloc2,'.mat'));
[Cam1LocalTest] = CalculeDisLocalDataTest(TabIndTrain,a5,a6);
%Calcule dist Grassman pour donne test
a7=load(strcat( Bloc1,'SkeletonMat_LIDS',camera1,'.mat'));
a8=load(strcat( Bloc2,'SkeletonMat_LIDS',camera1,'.mat'));
 [Cam1GrassmannTest] = CalculeDisGrassmannDataTest(TabIndTrain,a7,a8);
 %%comb data Test pour ppréparer les données pour apprentissage
 [ResultatCombTest,SauveGardAlfaTest] = Combiner_Test1(Cam1GrassmannTest,Cam1LocalTest);
 %%apprentissage alfa avec RDF
 [predLabel] = MainRDF(ResultatCombTrain,SauveGardAlfaTrain,ResultatCombTest,SauveGardAlfaTest);
%%%comb data test avec label trouvé par RDF
[classement] =  Combiner_Test(predLabel,Cam1GrassmannTest,Cam1LocalTest); 
   %%%%afficher Rank
r1=find(classement==1);
[szr1,sza1]=size(r1);
rank1=(szr1/150)*100;
fprintf('rank1 est %f\n', rank1);
    %%%rank5
 rank5= rank1;
   for i=2:5
  
  r5=find(classement==i);
  [szr5,sza1]=size(r5);
  cmc5=(szr5/150)*100;
     rank5=cmc5+rank5;
 end%%END alfa
  fprintf('rank5 est %f\n', rank5);
  
    %%%rank10
    rank10= rank1;
   for i=2:10
   r10=find(classement==i);
   [szr10,sza1]=size(r10);
   cmc10=(szr10/150)*100;
    rank10=cmc10+rank10;
 end%%END alfa
  fprintf('rank10 est %f\n', rank10);
    
    %%%rank20
    rank20= rank1;
   for i=2:20
    r20=find(classement==i);
    [szr20,sza1]=size(r20);
    cmc20=(szr20/150)*100;
    rank20=cmc20+rank20;
 end%%END alfa
    fprintf('rank20 est %f\n', rank20);
    beep
    
    tEnd2 = toc(tStart2);
    fprintf('%d minutes and %f seconds\n', floor( tEnd1/60), rem( tEnd1,60));
     fprintf('%d minutes and %f seconds\n', floor( tEnd2/60), rem( tEnd2,60));
%     ouf=0
%    for cont1=1:150
%     if (classement(cont1)>5)
%         ouf=ouf+1;
%     end
%    end